# Comparing `tmp/cstag-0.4.0.zip` & `tmp/cstag-0.4.1.zip`

## zipinfo {}

```diff
@@ -1,21 +1,21 @@
-Zip file size: 12102 bytes, number of entries: 19
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jun-06 04:48 cstag-0.4.0/
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jun-06 04:48 cstag-0.4.0/src/
--rw-r--r--  2.0 unx       38 b- defN 23-Jun-06 04:48 cstag-0.4.0/setup.cfg
--rw-r--r--  2.0 unx     1069 b- defN 23-Jun-06 04:48 cstag-0.4.0/LICENSE
--rw-r--r--  2.0 unx     3524 b- defN 23-Jun-06 04:48 cstag-0.4.0/PKG-INFO
--rw-r--r--  2.0 unx      847 b- defN 23-Jun-06 04:48 cstag-0.4.0/setup.py
--rw-r--r--  2.0 unx     2929 b- defN 23-Jun-06 04:48 cstag-0.4.0/README.md
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jun-06 04:48 cstag-0.4.0/src/cstag.egg-info/
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jun-06 04:48 cstag-0.4.0/src/cstag/
--rw-r--r--  2.0 unx        1 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag.egg-info/dependency_links.txt
--rw-r--r--  2.0 unx      285 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag.egg-info/SOURCES.txt
--rw-r--r--  2.0 unx     3524 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag.egg-info/PKG-INFO
--rw-r--r--  2.0 unx        6 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag.egg-info/top_level.txt
--rw-r--r--  2.0 unx      185 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag/__init__.py
--rw-r--r--  2.0 unx     1306 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag/lengthen.py
--rw-r--r--  2.0 unx     3840 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag/to_html.py
--rw-r--r--  2.0 unx      687 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag/shorten.py
--rw-r--r--  2.0 unx     1902 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag/mask.py
--rw-r--r--  2.0 unx     2547 b- defN 23-Jun-06 04:48 cstag-0.4.0/src/cstag/consensus.py
-19 files, 22690 bytes uncompressed, 9534 bytes compressed:  58.0%
+Zip file size: 12073 bytes, number of entries: 19
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jun-08 07:19 cstag-0.4.1/
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jun-08 07:19 cstag-0.4.1/src/
+-rw-r--r--  2.0 unx       38 b- defN 23-Jun-08 07:19 cstag-0.4.1/setup.cfg
+-rw-r--r--  2.0 unx     1069 b- defN 23-Jun-08 07:19 cstag-0.4.1/LICENSE
+-rw-r--r--  2.0 unx     3524 b- defN 23-Jun-08 07:19 cstag-0.4.1/PKG-INFO
+-rw-r--r--  2.0 unx      861 b- defN 23-Jun-08 07:19 cstag-0.4.1/setup.py
+-rw-r--r--  2.0 unx     2929 b- defN 23-Jun-08 07:19 cstag-0.4.1/README.md
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jun-08 07:19 cstag-0.4.1/src/cstag.egg-info/
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jun-08 07:19 cstag-0.4.1/src/cstag/
+-rw-r--r--  2.0 unx        1 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag.egg-info/dependency_links.txt
+-rw-r--r--  2.0 unx      285 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag.egg-info/SOURCES.txt
+-rw-r--r--  2.0 unx     3524 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag.egg-info/PKG-INFO
+-rw-r--r--  2.0 unx        6 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag.egg-info/top_level.txt
+-rw-r--r--  2.0 unx      185 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag/__init__.py
+-rw-r--r--  2.0 unx     1306 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag/lengthen.py
+-rw-r--r--  2.0 unx     3970 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag/to_html.py
+-rw-r--r--  2.0 unx      687 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag/shorten.py
+-rw-r--r--  2.0 unx     1902 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag/mask.py
+-rw-r--r--  2.0 unx     2547 b- defN 23-Jun-08 07:19 cstag-0.4.1/src/cstag/consensus.py
+19 files, 22834 bytes uncompressed, 9505 bytes compressed:  58.4%
```

## zipnote {}

```diff
@@ -1,58 +1,58 @@
-Filename: cstag-0.4.0/
+Filename: cstag-0.4.1/
 Comment: 
 
-Filename: cstag-0.4.0/src/
+Filename: cstag-0.4.1/src/
 Comment: 
 
-Filename: cstag-0.4.0/setup.cfg
+Filename: cstag-0.4.1/setup.cfg
 Comment: 
 
-Filename: cstag-0.4.0/LICENSE
+Filename: cstag-0.4.1/LICENSE
 Comment: 
 
-Filename: cstag-0.4.0/PKG-INFO
+Filename: cstag-0.4.1/PKG-INFO
 Comment: 
 
-Filename: cstag-0.4.0/setup.py
+Filename: cstag-0.4.1/setup.py
 Comment: 
 
-Filename: cstag-0.4.0/README.md
+Filename: cstag-0.4.1/README.md
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag.egg-info/
+Filename: cstag-0.4.1/src/cstag.egg-info/
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag/
+Filename: cstag-0.4.1/src/cstag/
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag.egg-info/dependency_links.txt
+Filename: cstag-0.4.1/src/cstag.egg-info/dependency_links.txt
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag.egg-info/SOURCES.txt
+Filename: cstag-0.4.1/src/cstag.egg-info/SOURCES.txt
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag.egg-info/PKG-INFO
+Filename: cstag-0.4.1/src/cstag.egg-info/PKG-INFO
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag.egg-info/top_level.txt
+Filename: cstag-0.4.1/src/cstag.egg-info/top_level.txt
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag/__init__.py
+Filename: cstag-0.4.1/src/cstag/__init__.py
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag/lengthen.py
+Filename: cstag-0.4.1/src/cstag/lengthen.py
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag/to_html.py
+Filename: cstag-0.4.1/src/cstag/to_html.py
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag/shorten.py
+Filename: cstag-0.4.1/src/cstag/shorten.py
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag/mask.py
+Filename: cstag-0.4.1/src/cstag/mask.py
 Comment: 
 
-Filename: cstag-0.4.0/src/cstag/consensus.py
+Filename: cstag-0.4.1/src/cstag/consensus.py
 Comment: 
 
 Zip file comment:
```

## Comparing `cstag-0.4.0/LICENSE` & `cstag-0.4.1/LICENSE`

 * *Files identical despite different names*

## Comparing `cstag-0.4.0/PKG-INFO` & `cstag-0.4.1/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cstag
-Version: 0.4.0
+Version: 0.4.1
 Summary: Python module to manipulate the minimap2's CS tag
 Home-page: https://github.com/akikuno/cstag
 Author: Akihiro Kuno
 Author-email: akuno@md.tsukuba.ac.jp
 Classifier: Programming Language :: Python :: 3.7
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
```

## Comparing `cstag-0.4.0/setup.py` & `cstag-0.4.1/setup.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,22 +1,24 @@
 import setuptools
 
 with open("README.md", "r") as f:
     long_description = f.read()
 
 setuptools.setup(
     name="cstag",
-    version="0.4.0",
+    version="0.4.1",
     author="Akihiro Kuno",
     author_email="akuno@md.tsukuba.ac.jp",
     description="Python module to manipulate the minimap2's CS tag",
     long_description=long_description,
     long_description_content_type="text/markdown",
     url="https://github.com/akikuno/cstag",
-    packages=setuptools.find_packages(where="src",),
+    packages=setuptools.find_packages(
+        where="src",
+    ),
     package_dir={"": "src"},
     classifiers=[
         "Programming Language :: Python :: 3.7",
         "Programming Language :: Python :: 3.8",
         "Programming Language :: Python :: 3.9",
         "Programming Language :: Python :: 3.10",
         "License :: OSI Approved :: MIT License",
```

## Comparing `cstag-0.4.0/README.md` & `cstag-0.4.1/README.md`

 * *Files identical despite different names*

## Comparing `cstag-0.4.0/src/cstag.egg-info/PKG-INFO` & `cstag-0.4.1/src/cstag.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cstag
-Version: 0.4.0
+Version: 0.4.1
 Summary: Python module to manipulate the minimap2's CS tag
 Home-page: https://github.com/akikuno/cstag
 Author: Akihiro Kuno
 Author-email: akuno@md.tsukuba.ac.jp
 Classifier: Programming Language :: Python :: 3.7
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
```

## Comparing `cstag-0.4.0/src/cstag/lengthen.py` & `cstag-0.4.1/src/cstag/lengthen.py`

 * *Files identical despite different names*

## Comparing `cstag-0.4.0/src/cstag/to_html.py` & `cstag-0.4.1/src/cstag/to_html.py`

 * *Files 13% similar despite different names*

```diff
@@ -1,28 +1,10 @@
 import re
 
-
-def to_html(CSTAG: str, DESCRIPTION: str = "") -> None:
-    """Output HTML file showing a sequence with mutations colored
-    Args:
-        CSTAG (str): cs tag in the **long** format
-        DESCRIPTION (str): (optional) header information in the output file
-    Return:
-        HTML file (*OUTPUT_FILE_NAME.html*)
-    Example:
-        >>> import cstag
-        >>> CSTAG = "cs:Z:=AC+GGG=T-ACGT*at~gt10cg=GNNN"
-        >>> DESCRIPTION = "Example"
-        >>> cstag_html = cstag.to_html(CSTAG, DESCRIPTION)
-        https://user-images.githubusercontent.com/15861316/158910398-67f480d2-8742-412a-b528-40e545c46513.png
-    """
-    if not re.search(r"[ACGT]", CSTAG):
-        raise Exception("Error: cs tag must be a long format")
-
-    html_header = """<!DOCTYPE html>
+HTML_HEADER = """<!DOCTYPE html>
     <html>
     <head>
     <style>
     h1 {
     font-family: Consolas, 'Courier New', monospace;
     color: #333;
     padding: 0.1em 0;
@@ -75,73 +57,94 @@
     font-weight: bold;
     # border-radius: 5px;
     }
 
     </style>
     </head>
     <body>
-    """
+"""
 
-    html_legend = """
-    <p class = "p_legend">
-    Labels:
-    <span class="Ins">Insertion</span>
-    <span class="Del">Deletion</span>
-    <span class="Sub">Substitution</span>
-    <span class="Splice">Splicing</span>
-    <span class="Unknown">Unknown</span>
-    </p>
-    <hr>
-    """
+HTML_LEGEND = """
+<p class = "p_legend">
+Labels:
+<span class="Ins">Insertion</span>
+<span class="Del">Deletion</span>
+<span class="Sub">Substitution</span>
+<span class="Splice">Splicing</span>
+<span class="Unknown">Unknown</span>
+</p>
+<hr>
+"""
+
+HTML_FOOTER = """
+</body>
+</html>
+"""
 
-    html_footer = """
-    </body>
-    </html>
-    """
 
-    description = DESCRIPTION
-    if description:
-        description = f"<h1>{description}</h1>"
-
-    cs = CSTAG.replace("cs:Z:", "")
-    if cs.startswith("N"):
-        cs = "=" + cs
-    list_cs = re.split(r"([-+*~=])", cs)[1:]
-    list_cs = [i + j for i, j in zip(list_cs[0::2], list_cs[1::2])]
+def validate_cstag(cstag: str) -> None:
+    if not re.search(r"[ACGTN]", cstag):
+        raise Exception("Error: cs tag must be a long format")
+
 
+def process_cstag(cstag: str) -> str:
+    cstag = cstag.replace("cs:Z:", "")
+    cstag_split_n = re.split(r"(N+)", cstag)
+    cs_mark_n = "".join(["@" + cs if cs.startswith("N") else cs for cs in cstag_split_n])
+    list_cs = re.split(r"([-+*~=@])", cs_mark_n)
+    list_cs = [l for l in list_cs if l != ""]
+    list_cs = [i + j for i, j in zip(list_cs[0::2], list_cs[1::2])]
     html_cs = []
     idx = 0
     while idx < len(list_cs):
         cs = list_cs[idx]
-        if cs[0] == "=":
-            cs = re.sub(r"(N+)", r"<span class='Unknown'>\1</span>", cs)
+        if cs.startswith("="):
             html_cs.append(cs[1:])
+        elif cs.startswith("@"):
+            cs = re.sub(r"(N+)", r"<span class='Unknown'>\1</span>", cs[1:])
+            html_cs.append(cs)
         elif cs[0] == "*":
             html_cs.append(f"<span class='Sub'>{cs[2].upper()}")
-            while idx < len(list_cs) - 1 and list_cs[idx+1].startswith("*"):
+            while idx < len(list_cs) - 1 and list_cs[idx + 1].startswith("*"):
                 html_cs.append(f"{list_cs[idx+1][2].upper()}")
                 idx += 1
             html_cs.append("</span>")
         elif cs[0] == "+":
             html_cs.append(f"<span class='Ins'>{cs[1:].upper()}</span>")
         elif cs[0] == "-":
             html_cs.append(f"<span class='Del'>{cs[1:].upper()}</span>")
         elif cs[0] == "~":
             left = cs[1:3].upper()
             splice = "-" * int(cs[3:-2])
             right = cs[-2:].upper()
             html_cs.append(f"<span class='Splice'>{left + splice + right}</span>")
         idx += 1
-
     html_cs = "".join(html_cs)
-    html_cs = f"<p class='p_seq'>{html_cs}</p>"
+    return f"<p class='p_seq'>{html_cs}</p>"
+
 
+def to_html(cstag: str, description: str = "") -> str:
+    """Output HTML string showing a sequence with mutations colored
+    Args:
+        cstag (str): cs tag in the **long** format
+        description (str): (optional) header information in the output string
+    Return:
+        HTML string
+    Example:
+        >>> import cstag
+        >>> cstag = "cs:Z:=AC+GGG=T-ACGT*at~gt10cg=GNNN"
+        >>> description = "Example"
+        >>> html_string = cstag.to_html(cstag, description)
+    """
+    validate_cstag(cstag)
+    description_str = f"<h1>{description}</h1>" if description else ""
+    html_cs = process_cstag(cstag)
     report = "\n".join(
         [
-            html_header,
-            description,
-            html_legend,
+            HTML_HEADER,
+            description_str,
+            HTML_LEGEND,
             html_cs,
-            html_footer,
+            HTML_FOOTER,
         ]
     )
     return report
```

## Comparing `cstag-0.4.0/src/cstag/shorten.py` & `cstag-0.4.1/src/cstag/shorten.py`

 * *Files identical despite different names*

## Comparing `cstag-0.4.0/src/cstag/mask.py` & `cstag-0.4.1/src/cstag/mask.py`

 * *Files identical despite different names*

## Comparing `cstag-0.4.0/src/cstag/consensus.py` & `cstag-0.4.1/src/cstag/consensus.py`

 * *Files identical despite different names*

