# Comparing `tmp/zhijiang-0.0.4.6-py3-none-any.whl.zip` & `tmp/zhijiang-0.0.4.7-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,17 +1,18 @@
-Zip file size: 6431 bytes, number of entries: 15
--rw-rw-r--  2.0 unx     1408 b- defN 22-Nov-18 07:31 zhijiang/__init__.py
--rw-rw-r--  2.0 unx      231 b- defN 22-Nov-18 06:15 zhijiang/data/rc_files/alias
--rw-rw-r--  2.0 unx       75 b- defN 22-Jan-19 10:48 zhijiang/data/rc_files/dockerignore
--rw-rw-r--  2.0 unx      393 b- defN 22-Nov-18 06:26 zhijiang/data/rc_files/gdbinit
--rw-rw-r--  2.0 unx      118 b- defN 22-Mar-09 08:57 zhijiang/data/rc_files/gitconfig
--rw-rw-r--  2.0 unx      534 b- defN 22-Jan-19 10:30 zhijiang/data/rc_files/inputrc
--rw-rw-r--  2.0 unx      153 b- defN 22-Jan-19 10:48 zhijiang/data/rc_files/tmux.config
--rw-rw-r--  2.0 unx      319 b- defN 22-Jan-19 10:41 zhijiang/data/rc_files/vimrc
--rw-rw-r--  2.0 unx      973 b- defN 22-Nov-18 07:07 zhijiang/scripts/install_useful_tools.sh
--rw-rw-r--  2.0 unx     1081 b- defN 22-Nov-18 07:31 zhijiang-0.0.4.6.dist-info/LICENSE.txt
--rw-rw-r--  2.0 unx      934 b- defN 22-Nov-18 07:31 zhijiang-0.0.4.6.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 22-Nov-18 07:31 zhijiang-0.0.4.6.dist-info/WHEEL
--rw-rw-r--  2.0 unx       44 b- defN 22-Nov-18 07:31 zhijiang-0.0.4.6.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx        9 b- defN 22-Nov-18 07:31 zhijiang-0.0.4.6.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1282 b- defN 22-Nov-18 07:31 zhijiang-0.0.4.6.dist-info/RECORD
-15 files, 7646 bytes uncompressed, 4273 bytes compressed:  44.1%
+Zip file size: 9286 bytes, number of entries: 16
+-rw-rw-r--  2.0 unx     2444 b- defN 23-Jun-08 06:42 zhijiang/__init__.py
+-rw-rw-r--  2.0 unx      231 b- defN 23-Jun-08 04:57 zhijiang/data/rc_files/alias
+-rw-rw-r--  2.0 unx       75 b- defN 23-Jun-08 04:57 zhijiang/data/rc_files/dockerignore
+-rw-rw-r--  2.0 unx      393 b- defN 23-Jun-08 04:57 zhijiang/data/rc_files/gdbinit
+-rw-rw-r--  2.0 unx      118 b- defN 23-Jun-08 04:57 zhijiang/data/rc_files/gitconfig
+-rw-rw-r--  2.0 unx      561 b- defN 23-Jun-08 04:57 zhijiang/data/rc_files/inputrc
+-rw-rw-r--  2.0 unx      153 b- defN 23-Jun-08 04:57 zhijiang/data/rc_files/tmux.config
+-rw-rw-r--  2.0 unx      415 b- defN 23-Jun-08 04:57 zhijiang/data/rc_files/vimrc
+-rw-rw-r--  2.0 unx     1629 b- defN 23-Jun-08 07:39 zhijiang/scripts/install_useful_tools.sh
+-rw-rw-r--  2.0 unx     5768 b- defN 23-Jun-08 04:57 zhijiang/scripts/useful_func.py
+-rw-rw-r--  2.0 unx     1081 b- defN 23-Jun-08 09:14 zhijiang-0.0.4.7.dist-info/LICENSE.txt
+-rw-rw-r--  2.0 unx      923 b- defN 23-Jun-08 09:14 zhijiang-0.0.4.7.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jun-08 09:14 zhijiang-0.0.4.7.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       43 b- defN 23-Jun-08 09:14 zhijiang-0.0.4.7.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx        9 b- defN 23-Jun-08 09:14 zhijiang-0.0.4.7.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1371 b- defN 23-Jun-08 09:14 zhijiang-0.0.4.7.dist-info/RECORD
+16 files, 15306 bytes uncompressed, 6990 bytes compressed:  54.3%
```

## zipnote {}

```diff
@@ -21,26 +21,29 @@
 
 Filename: zhijiang/data/rc_files/vimrc
 Comment: 
 
 Filename: zhijiang/scripts/install_useful_tools.sh
 Comment: 
 
-Filename: zhijiang-0.0.4.6.dist-info/LICENSE.txt
+Filename: zhijiang/scripts/useful_func.py
 Comment: 
 
-Filename: zhijiang-0.0.4.6.dist-info/METADATA
+Filename: zhijiang-0.0.4.7.dist-info/LICENSE.txt
 Comment: 
 
-Filename: zhijiang-0.0.4.6.dist-info/WHEEL
+Filename: zhijiang-0.0.4.7.dist-info/METADATA
 Comment: 
 
-Filename: zhijiang-0.0.4.6.dist-info/entry_points.txt
+Filename: zhijiang-0.0.4.7.dist-info/WHEEL
 Comment: 
 
-Filename: zhijiang-0.0.4.6.dist-info/top_level.txt
+Filename: zhijiang-0.0.4.7.dist-info/entry_points.txt
 Comment: 
 
-Filename: zhijiang-0.0.4.6.dist-info/RECORD
+Filename: zhijiang-0.0.4.7.dist-info/top_level.txt
+Comment: 
+
+Filename: zhijiang-0.0.4.7.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## zhijiang/__init__.py

```diff
@@ -3,41 +3,70 @@
 import fire
 import zhijiang as pkg
 
 
 pkg_installed_path = pkg.__path__[0]
 
 
-def setup_rc_files(dry_run=True):
-    """dry_run can be True or False"""
-    assert isinstance(dry_run, bool), "dry_run should be a boolean, so its value can only by True or False"
-    rc_files_path = os.path.join(pkg_installed_path, "data/rc_files")
+def setup_rc_files(dry_run=True, restore_rc=False):
+    assert isinstance(
+        dry_run, bool
+    ), "dry_run should be a boolean, so its value can only by True or False"
     if dry_run:
-       cprint("use '--dry_run=False' to disable dry run", "red")
-    for root, dirs, files in os.walk(rc_files_path):
-       for f in files:
-          rc_file = os.path.join(root, f)
-          dst = f"~/.{f}"
-          if dry_run:
-              print(f"in dry run, backup {dst} and copy {rc_file} to {dst}")
-          else:
-              cmd = f"sudo bash -c 'cp {dst} {dst}.backup; cp {rc_file} {dst}'"
-              print(cmd)
-              os.system(cmd)
-    os.system("sudo bash -c 'echo source ~/.alias >> ~/.bashrc' ")
+        cprint(
+            "you are in dry run mode, use '--dry_run=False' to disable dry run", "red"
+        )
+
+    rc_files_path = os.path.join(pkg_installed_path, "data/rc_files")
+    for root, _, files in os.walk(rc_files_path):
+        for f in files:
+            rc_file = os.path.join(root, f)
+            dst = f"~/.{f}"
+            backup = f"{dst}.bk"
+            # backup the file if backup file is not existed
+            if not os.path.exists(os.path.expanduser(backup)):
+                # when user is root, then the rc file is not existed
+                if not os.path.exists(os.path.expanduser(dst)):
+                    os.system(f"touch {dst}")
+                os.system(f"cp {dst} {backup}")
+
+            if restore_rc:
+                cmd = f"cp {backup} {dst}"
+            else:
+                cmd = f"cp {rc_file} {dst}"
+            print(cmd)
+            if not dry_run:
+                os.system(cmd)
+                os.system("sudo bash -c 'echo source ~/.alias >> ~/.bashrc' ")
+
+
+def install_useful_tools():
+    """
+    1. install usefule shell commands and python pkg, e.g. profiling tools, debugging tools;
+    2. add useful functions prefixed with zhijxu to python site.py, so you can call them like built-in functions
+    """
+    script_path = os.path.join(pkg_installed_path, "scripts/install_useful_tools.sh")
+    os.system(f"bash {script_path}")
 
 
 def info():
-    """print help info"""
-    cprint("if you want tab completion, please 'zhijiang -- --completion > ~/.zhijiang; echo source  ~/.zhijiang >> ~/.bashrc'", "red")
-    cprint(f"there are many shell scripts in {os.path.join(pkg_installed_path, 'scripts')}, you could modify PATH to make them as command shell command", "red")
+    """
+    print help info;
+    to enable tab completion >> zhijiang -- --completion > ~/.zhijiang; echo source  ~/.zhijiang >> ~/.bashrc; source ~/.bashrc
+    """
+    cprint("1. if you want tab completion, please 'zhijiang -- --completion > ~/.zhijiang; echo source  ~/.zhijiang >> ~/.bashrc; source ~/.bashrc'", "red")
+    cprint("2. zhijiang subcommand-xx --help to see how to control subcommand", "red")
+    cprint(f"3. you can modify the file before executing them, they are put at {pkg_installed_path}", "red")
 
 
 def main():
-    fire.Fire({
-               "setup_rc_files": setup_rc_files,
-               "info": info
-              })
+    fire.Fire(
+        {
+            "setup_rc_files": setup_rc_files,
+            "install_useful_tools": install_useful_tools,
+            "info": info,
+        }
+    )
 
 
 if __name__ == "__main__":
     main()
```

## zhijiang/data/rc_files/inputrc

```diff
@@ -1,9 +1,10 @@
 # Make Tab autocomplete regardless of filename case
 set completion-ignore-case on
+set completion-map-case on
 
 # List all matches in case multiple possible completions are possible
 set show-all-if-ambiguous on
 
 # Be more intelligent when autocompleting by also looking at the text after
 # the cursor. For example, when the current line is "cd ~/src/mozil", and
 # the cursor is on the "z", pressing Tab will not autocomplete it to "cd
```

## zhijiang/data/rc_files/vimrc

```diff
@@ -10,7 +10,14 @@
 set lcs=tab:▸\ ,trail:·,nbsp:_
 set list
 
 " Use the OS clipboard by default (on versions compiled with `+clipboard`)
 set clipboard=unnamed
 
 set cursorline
+
+" center current line
+nmap wc zz
+" top current line
+nmap wt zt
+" bottom current line
+nmap wb L
```

## zhijiang/scripts/install_useful_tools.sh

```diff
@@ -1,28 +1,46 @@
-alias sudo='sudo env "PATH=$PATH" '
+set -ex
 
+sudo apt update
 sudo apt install -y tldr tmux
-sudo apt install -y vim-gtx  # vim with +clipboard, so vim can use os's clipboard
+sudo apt install -y vim-gtk  # vim with +clipboard, so vim can use os's clipboard
 
 sudo apt install -y gdb cgdb
 
-sudo apt install peco
-wget -O /tmp/bat.deb https://github.com/sharkdp/bat/releases/download/v0.21.0/bat-musl_0.21.0_amd64.deb && sudo dpkg -i /tmp/bat.deb
-
+sudo apt install -y nsight-systems-2021.2.4 nsight-compute-2021.3.1
+sudo ln -s /opt/nvidia/nsight-compute/2021.3.1/ncu /usr/local/bin
 
-sudo pip install  py-spy python3.8-dbg viztracer
+sudo apt install -y peco
+wget -O /tmp/bat.deb https://github.com/sharkdp/bat/releases/download/v0.21.0/bat-musl_0.21.0_amd64.deb && sudo dpkg -i /tmp/bat.deb
 
-sudo pip install cmake==3.21.4
+sudo apt install -y python3.8-dbg
+sudo env "PATH=$PATH" pip install py-spy viztracer debugpy \
+    cmake==3.21.4
 
 # tab complete of git
 curl https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash -o ~/.git-completion.bash
 echo "source ~/.git-completion.bash" >> ~/.bashrc
 # install tool to outuput c++ call graph, class grpah
+sudo  apt-get install -y silversearcher-ag
 (
 cd /tmp
 wget https://raw.githubusercontent.com/satanson/cpp_etudes/master/calltree.pl
 wget https://raw.githubusercontent.com/satanson/cpp_etudes/master/cpptree.pl
 chmod 777 calltree.pl cpptree.pl
-sudo mv calltree.pl /usr/local/bin/caltree
+sudo mv calltree.pl /usr/local/bin/calltree
 sudo mv cpptree.pl /usr/local/bin/cpptree
 )
-sudo pip install gdbgui
+# add usefule python function to builtins, so they can be call directly
+# these functions will be prefixed with zhijxu to avoid name conflict
+sitepy_path=`python -c "import site; print(site.__file__)"`
+backup=`dirname $sitepy_path`/site.py_bk
+if [ -f $backup ]
+then
+  ## restore site.py
+  cp $backup $sitepy_path
+else
+  ## site.py is unchanged, so backup it
+  cp $sitepy_path $backup
+fi
+
+pkg_script_path=`dirname $BASH_SOURCE`
+cat $pkg_script_path/useful_func.py >> $sitepy_path
```

## Comparing `zhijiang-0.0.4.6.dist-info/LICENSE.txt` & `zhijiang-0.0.4.7.dist-info/LICENSE.txt`

 * *Files identical despite different names*

## Comparing `zhijiang-0.0.4.6.dist-info/METADATA` & `zhijiang-0.0.4.7.dist-info/METADATA`

 * *Files 6% similar despite different names*

```diff
@@ -1,28 +1,25 @@
 Metadata-Version: 2.1
 Name: zhijiang
-Version: 0.0.4.6
+Version: 0.0.4.7
 Summary: setup linux env, such as bashrc etc.
 Home-page: https://github.com/xu-zhijiang/env-setup.git
 Author: Xu Zhijiang
 Author-email: 15852939122@163.com
-License: UNKNOWN
 Project-URL: Funding, https://github.com/xu-zhijiang
 Project-URL: Source, https://github.com/xu-zhijiang/env-setup.git
 Keywords: env setup,development,zhijiang
-Platform: UNKNOWN
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: MIT License
 Requires-Python: >=2
 Description-Content-Type: text/markdown
+License-File: LICENSE.txt
 Requires-Dist: termcolor
 Requires-Dist: fire
 Provides-Extra: dev
 Requires-Dist: check-manifest ; extra == 'dev'
 Provides-Extra: test
 Requires-Dist: coverage ; extra == 'test'
 
 # A project used to setup development environment, especially the rcfiles(aka dotfiles)
 
 After pip install, the shell command "zhijiang" could be used, "zhijiang info" could be used to get help.
-
-
```

